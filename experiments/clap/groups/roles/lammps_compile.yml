---
- hosts: all
  tasks:
    - name: Git clone LAMMPS
      become: yes
      shell: |
        git clone --single-branch --depth=1 --branch paramount-profiling https://github.com/fopor/lammps.git
        chmod -R 777 lammps/
        chown -R ubuntu lammps/
      args:
        chdir: /efs/

    - name: Build MPICH
      become: yes
      shell: |
        sh build_mpich.sh
      args:
        chdir: /efs/lammps/experiments/

    - name: Build LAMMPS
      become: yes
      shell: |
        sh setup.sh 2
      args:
        chdir: /efs/lammps/experiments/

    - name: Set permission on build foler
      become: yes
      shell: |
        chmod 777 *

      args:
        chdir: "/efs/lammps/build/"

