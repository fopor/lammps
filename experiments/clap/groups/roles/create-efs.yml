---
- name: "Create EFS"
  hosts: localhost
  gather_facts: true
  tasks:
    - name: "Create EFS in ec2 us-east-1"
      efs:
        aws_secret_key: "{{lookup('file', '~/.clap/private/mo833_acess.pem') }}"
        aws_access_key: "{{lookup('file', '~/.clap/private/mo833_acess.pub') }}"
        region: "us-east-1"
        name: "{{ aws_efs_name }}"
        id: "{{ aws_efs_name }}"
        state: "present"
        tags:
            Name: "{{ aws_efs_name }}"
        targets:
        - subnet_id: subnet-bbe700dc
          security_groups: [ "{{ aws_sg_id }}" ]
      register: "aws_setup_vars"

    - name: "Print creation results dictionary"
      debug:
        msg: "EFSADDR={{ aws_setup_vars.efs.mount_targets }}"
